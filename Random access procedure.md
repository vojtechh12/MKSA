## Contents
- modes (contention based, contention free), peamble, RAP procedure (4 steps), collisions and their resolution
---
*RAP is initial communication between UE and eNB to connect UE to the network, to obtain communication resources. Either as part of UE's initial attach or after handover, or after UL-resync*

## Modes
1. **contention free RAP:**
	- network is aware of the UE and assigns it with a specific preamble
	- e.g. after hangover (handover)
2. **contention based RAP:**
	- UEs compete for resources

### Contention based RAP
1. Preamble (UE --> eNB)
2. Random Access Response (eNB --> UE)
3. Connection Request (UE --> eNB)
4. Contention Resoultion (eNB --> UE)
---
**Preamble**
- UE chooses 1 of 64 available random access preambles
- they are orthogonal sequences (zero autocorrelation)
![[Pasted image 20240205100254.png]]
- UE waits for feedback, if it doesn't receive one after TTI + backoff interval, it retransmitts preamble with higher power

**Random Access Response**
- transmitted on PDSCH (allocated via PDCCH b4)
- eNB determines UE identity based on number of subframe of the preamble
- contains 3 pieces of information:
	1. Temporary C-RNTI (cell ID for UE)
	2. Timing advance value (estimated from preamble)
	3. Uplink grant resource (used in next UE message)

**Connection Request**
- UE requests connection on RRC layer
- transmitted via PUSCH on resource granted in preceeding message from eNB
- UE identity: UE sends a random number generated by the UE
- this message is retransmitted in case of collisions among UEs

**Contention Resolution**
- this message to the UE from eNB includes C-RNTI (b4 it was temp)
- device which doesn't receive this message with its number has to compete again (from preamble step)

>[!note]
>*UEs with a colliding preamble retransmit it in the next available random access slot*



